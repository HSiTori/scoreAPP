<html>
<head>
 <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
 <link rel="stylesheet" type="text/css" href="css/bootstrap.css"/>
 <script type="text/javascript" src="js/jquery-3.1.1.min.js"></script>
 <script src="https://code.jquery.com/jquery-2.1.4.js"></script>
 <script type="text/javascript" src="js/bootstrap.min.js"></script>
 <script src="js/ForerunnerDB.js"></script>
 <script src="js/main.js"></script>
</head>  
<body>

 <div class="container">
 <div class="row"> 
 
 
<!--上方列表-->
<nav class="navbar navbar-inverse">
<div class="container-fluid">
<div id="container-headbox">
 <div class="navbar-header">
   <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar">
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </button>
  </div>
<div class="collapse navbar-collapse navbar-collapse-center" id="myNavbar">   
  <ul class="nav navbar-nav">
    <div class="btn-group btn-group-justified">
    <a href="index.html" class="btn btn-link">最首頁</a>
    <a href="addScore.html" class="btn btn-link">新增成績</a>
    <a href="#" class="btn btn-link">日期查詢</a>
  </div>    
  </ul> 
  <ul class="nav navbar-nav navbar-right">
    <li class="dropdown"><a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">其他(≧▽≦)<span class="caret"></span></a>
  <ul class="dropdown-menu">
   <div class="container">
   <div class="row"> 
    <div class="col-xs-6"><a href="#">各科目成績</a></div>
    <div class="col-xs-6"><a href="#">各曜日成績</a></div>
    <div class="col-xs-6"><a href="#">最近一周成績</a></div>
    <div class="col-xs-6"><a href="#">最新十筆成績</a></div>
    <div class="col-xs-6"><a href="#">不及格列表</a></div>
    <div class="col-xs-6"><a href="#" class="disabled">敬請期待</a></div>
   </div>
   </div> 
  </ul>
    </li>
  </ul>
 </div>
</div> 
</div>
</nav>
<input type="button" id="check" onclick="showscore();" value="篩選">

 <!--表格-->
<div class="col-xs-12" id="scorelist">
  <table id="scoretable" class="table table-striped" style="">
    <thead>
     <tr>
        <th>科目</th>
        <th>分數</th>
        <th>詳細</th>
        <th>操作</th>
     </tr>
    </thead>
    <tbody>
    </tbody>
  </table>
</div>
  
 <!--更多modal--> 
  <div id="alert" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
<div class="modal-dialog modal-lg" role="document">
   <div class="modal-content" style="margin-top: 60%;">
     <div class="modal-header">
       <h4 style="text-align:center;" >小提醒~~~</h4> 
       <p id='alertresult'></p>
       <a href="mainScore.html" class="btn btn-info">前往主頁</a>
       <button type="button" class="btn btn-default" data-dismiss="modal">Close</button> 
     </div>
   </div> 
</div>
</div> 
  
  
  
  
  
  
  </div>
  </div>
<script>
 
 //加入成績資料
 function showscore(){
   $("#scoretable tbody").text("");
   $("div#scorelist").show();
   for(var i=0;i<scoreCollection.find().length;i++){
       var comment = "<tr>"+"<td>"+scoreCollection.find()[i].Subject+"</td>"+"<td>"+scoreCollection.find()[i].Score+"</td>"+"<td><input type='button' class='btn btn-link' id='button"+i+"' data-target='#details'>更多</td>"+"<td><input type='button' class='btn btn-info btn-xs' id='changefirst' data-id='"+scoreCollection.find()[i]._id+"' data-toggle='modal' data-target='#changedata' onclick='changedata();' value='修改'>&nbsp<input type='button' id="+i+" class='btn btn-danger btn-xs' onclick='deletescoredetail("+i+");' value='刪除'></td></tr>";
       $("table#scoretable tbody").append(comment);
   };
  scoreCollection.load(); 
 };
  $("table").on("click","button#check",showscore); 
 
 //刪除
 function deletescoredetail(i){
  var r=confirm("確定要刪除嗎?")
  console.log(i);
  if (r==true){
    scoreCollection.remove({ _id: scoreCollection.find()[i]._id });
    console.log(scoreCollection.find()[i]._id);
    scoreCollection.save();
    showscore();
  }else{
    alert("好的!不刪除!");
  }
 };  

 </script>
</body>
</html> 
